{% extends "common-content.html" %}
{% block content_media %}
    <style>
        .title-state {
            font-size: 2em;
            float: left;
            width: 1.1em;
            display: block;
            margin-top: 0.16em;
        }

        .info-float a {
            vertical-align: middle;
        }

        .problem-clarification {
            border-bottom: 1px solid #ccc;
            margin-top: 1em;
            margin-bottom: 1em;
        }

        .clarifications-area h2 {
            margin-bottom: 20px;
        }

        .problem-clarification .body {
            display: inline-block;
            padding-left: 3em;
        }
    </style>
{% endblock %}

{% block content_js_media %}
    <script>
        $(function () {
            $('a#clone-link').click(function (event) {
                event.preventDefault();
                if (confirm('Are you sure you want to clone?'))
                    $(this).closest("form").submit();
            })
        });
    </script>
{% endblock %}

{% block title_row %}
    <div class="problem-title">
        <h2 style="color:#393630; display: inline-block">{{ title }}</h2>
        {% if has_pdf_render %}
            <span class="spacer"></span>
            <a href="{{ url('problem_pdf', problem.code) }}" class="view-pdf">
                <span class="pdf-icon">
                    <span class="fa fa-file-pdf-o pdf-icon-logo"></span>
                    <span class="pdf-icon-bar"></span>
                </span>
                {{ _('View as PDF') }}
            </a>
        {% endif %}
    </div>
{% endblock %}

{% block info_float %}
    <a href="{{ url('problem_submit', problem.code) }}" class="unselectable button full" style="margin-bottom: 12px;">
            Çözüm gönder
    </a>

    <div style="margin-bottom: 12px;">
        {% if request.user.is_authenticated and has_submissions %}
            <div>
                 <a href="{{ url('user_submissions', problem.code, request.user.username) }}">Gönderilerim</a>
            </div>
        {% endif %}
        <div><a href="{{ url('chronological_submissions', problem.code) }}">Tüm gönderiler</a></div>
    </div>

    {% if editorial and editorial.is_public %}
        <div><a href="{{ url('problem_editorial', problem.code) }}">{{ _('Read editorial') }}</a></div>
    {% endif %}

    <div style="margin-bottom: 12px;">
        {% if can_edit_problem %}
            <div><a href="{{ url('admin:judge_problem_change', problem.id) }}">{{ _('Edit problem') }}</a></div>
            {% if not problem.is_manually_managed %}
                <div><a href="{{ url('problem_data', problem.code) }}">{{ _('Edit test data') }}</a></div>
            {% endif %}
        {% endif %}
        {% if perms.judge.clone_problem %}
            <div>
                <form action="{{ url('problem_clone', problem.code) }}" method="post">
                    {% csrf_token %}
                     <a id="clone-link" href="#">{{ _('Clone problem') }}</a>
                 </form>
             </div>
         {% endif %}
    </div>

    <div class="problem-info-entry">
        <i class="fa fa-check fa-fw"></i><span class="pi-name">Puan:</span>
        <span class="pi-value">
            {{ contest_problem.points }}
        </span>
    </div>
    <div class="problem-info-entry">
        <i class="fa fa-clock-o fa-fw"></i><span class="pi-name">Süre sınırı:</span>
        <span class="pi-value">{{ problem.time_limit }}s</span>
    </div>
    <div class="problem-lang-limits">
        {% for name, limit in problem.language_time_limit %}
            <div class="lang-limit">
                <span class="lang-name">{{ name }}</span>
                <span class="lang-tl">{{ limit }}s</span>
            </div>
        {% endfor %}
    </div>
    <div class="problem-info-entry">
        <i class="fa fa-server fa-fw"></i><span class="pi-name">Bellek sınırı:</span>
        <span class="pi-value">{{ problem.memory_limit|kbsimpleformat }}</span>
    </div>
    <div class="problem-lang-limits">
        {% for name, limit in problem.language_memory_limit %}
            <div class="lang-limit">
                <span class="lang-name">{{ name }}</span>
                <span class="lang-ml">{{ limit|kbsimpleformat }}</span>
            </div>
        {% endfor %}
    </div>
    {% if show_languages %}
        <div id="allowed-langs">
            <div class="toggle open unselectable">
                <i class="fa fa-chevron-right fa-fw"></i>{{ _('Allowed languages') }}
            </div>
            <div style="margin-bottom:-1em" class="toggled">
                {% with usable=problem.usable_common_names, langs=problem.languages_list() %}
                    {% for lang in langs %}
                        {% if lang in usable %}
                            {{ lang }}
                        {% else %}
                            <s title="{{ _('No %(lang)s judge online', lang=lang) }}">{{ lang }}</s>
                        {% endif %}
                        {% if not loop.last %}, {% endif %}
                    {% endfor %}
                {% endwith %}
            </div>
        </div>
    {% endif %}
{% endblock %}

{% block description %}
    {% cache 86400 'problem_html' problem.id MATH_ENGINE LANGUAGE_CODE %}
        {{ description|markdown("problem", MATH_ENGINE)|reference|str|safe }}
    {% endcache %}

    {% with license=problem.license %}
        {% if license %}
            <span class="license">
            <a href="{{ url('license', license.key) }}">{{ license.display or license.name }}</a>
        </span>
        {% endif %}
    {% endwith %}
{% endblock %}

{% block comments %}
    {% if contest_problem and contest_problem.contest.use_clarifications and has_clarifications %}
        <div class="clarifications-area">
            <h2><i class="fa fa-question-circle"></i> Açıklamalar</h2>
                {% for clarification in clarifications %}
                    <div class="problem-clarification">
                        <div class="time">{{ relative_time(clarification.date) }}</div>
                        <span class="body">
                            {{ clarification.description|markdown('problem', MATH_ENGINE)|reference }}
                        </span>
                    </div>
                {% endfor %}
        </div>
    {% endif %}
{% endblock %}

{% block bodyend %}
    {{ super() }}
{% endblock %}
